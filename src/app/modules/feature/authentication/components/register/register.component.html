<h3>Register new account</h3>

<form [formGroup]="registerForm" class="mt-4 mb-3 d-flex flex-column">
  <div class="row">
    <div class="col-xl-6 form-group d-flex flex-column">
      <mat-label>First Name</mat-label>

      <mat-form-field appearance="outline">
        <input
          matInput
          placeholder="Enter first name"
          formControlName="first_name"
        />
      </mat-form-field>

      <ng-container
        *ngIf="
          registerForm.controls.first_name.touched &&
          registerForm.controls.first_name.errors
        "
      >
        <ng-container
          [ngSwitch]="registerForm.controls.first_name | errorMessages"
        >
          <mat-error *ngSwitchCase="'required'"
            >First name is required</mat-error
          >
          <mat-error *ngSwitchCase="'minlength'"
            >First name should be at least 3 characters</mat-error
          >
          <mat-error *ngSwitchCase="'maxlength'"
            >First name should be at most 20 characters</mat-error
          >
        </ng-container></ng-container
      >
    </div>

    <div class="col-xl-6 form-group d-flex flex-column">
      <mat-label>Last Name</mat-label>

      <mat-form-field appearance="outline">
        <input
          matInput
          placeholder="Enter last name"
          formControlName="last_name"
        />
      </mat-form-field>

      <ng-container
        *ngIf="
          registerForm.controls.last_name.touched &&
          registerForm.controls.last_name.errors
        "
      >
        <ng-container
          [ngSwitch]="registerForm.controls.last_name | errorMessages"
        >
          <mat-error *ngSwitchCase="'required'"
            >Last name is required</mat-error
          >
          <mat-error *ngSwitchCase="'minlength'"
            >Last name should be at least 3 characters</mat-error
          >
          <mat-error *ngSwitchCase="'maxlength'"
            >Last name should be at most 20 characters</mat-error
          >
        </ng-container></ng-container
      >
    </div>
  </div>

  <div class="form-group d-flex flex-column">
    <mat-label>E-mail</mat-label>

    <mat-form-field appearance="outline">
      <input matInput placeholder="Enter your email" formControlName="email" />
    </mat-form-field>

    <ng-container
      *ngIf="
        registerForm.controls.email.touched &&
        registerForm.controls.email.errors
      "
    >
      <ng-container [ngSwitch]="registerForm.controls.email | errorMessages">
        <mat-error *ngSwitchCase="'required'">Email is required</mat-error>
        <mat-error *ngSwitchCase="'email'">Enter valid email</mat-error>
      </ng-container>
    </ng-container>
  </div>

  <div class="form-group d-flex flex-column">
    <mat-label>Password</mat-label>

    <mat-form-field appearance="outline">
      <input
        matInput
        placeholder="Enter your password"
        formControlName="password"
      />
    </mat-form-field>

    <ng-container
      *ngIf="
        registerForm.controls.password.touched &&
        registerForm.controls.password.errors
      "
    >
      <ng-container [ngSwitch]="registerForm.controls.password | errorMessages">
        <mat-error *ngSwitchCase="'required'">Password is required</mat-error>
        <mat-error *ngSwitchCase="'minlength'"
          >Password should be at least 4 characters</mat-error
        >
        <mat-error *ngSwitchCase="'pattern'"
          >Password should contain at least 1 lowercase 1 uppercase 1 number and
          1 special character</mat-error
        >
      </ng-container></ng-container
    >
  </div>

  <div class="form-group d-flex flex-column">
    <mat-label>Role</mat-label>

    <mat-form-field appearance="outline">
      <mat-select formControlName="role">
        <mat-option value="Admin">Admin</mat-option>
        <mat-option value="Customer">Customer</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-error
      *ngIf="
        registerForm.controls.role.touched && registerForm.controls.role.errors
      "
      >Role is required</mat-error
    >
  </div>
</form>

<div class="d-flex flex-column">
  <button (click)="submitRegister()" mat-flat-button class="mb-2 btn-primary">
    Register
  </button>
  <button routerLink="../login" mat-stroked-button class="btn-outline-primary">
    Login
  </button>
</div>
